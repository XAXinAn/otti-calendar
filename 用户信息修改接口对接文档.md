# 👤 用户信息修改接口对接文档

为了实现个人中心的真实数据同步，后端需要实现以下用户信息更新接口。

## 1. 接口定义

*   **接口地址**: `/api/auth/profile`
*   **请求方法**: `PUT`
*   **认证方式**: Header 中必须携带 `Authorization: Bearer {token}`

## 2. 请求参数 (Body)

前端会发送完整的用户信息对象，包含已修改和未修改的字段。

| 参数名 | 类型 | 描述 | 示例值 |
| :--- | :--- | :--- | :--- |
| **`userId`** | String | 用户唯一ID (不可改) | `"uuid-12345"` |
| **`username`**| String | 用户昵称 | `"江杭羲"` |
| **`phone`** | String | 手机号 | `"13800138000"` |
| **`gender`** | String | 性别 | `"男" / "女" / "保密"` |
| **`role`** | String | 角色 | `"user"` |
| **`avatar`** | String?| 头像URL | `null` |

**请求体示例**:
```json
{
  "userId": "f15197d2-e760-4e9b-b173-5e3b2348696d",
  "username": "江杭羲",
  "phone": "13800138000",
  "gender": "男",
  "role": "user",
  "avatar": null
}
```

---

## 3. 响应结构 (JSON)

后端处理成功后，请返回标准的 `ApiResponse` 结构。

**成功响应 (200 OK)**:
```json
{
  "code": 200,
  "message": "个人信息更新成功",
  "data": null
}
```

**失败响应 (400/500)**:
```json
{
  "code": 500,
  "message": "系统繁忙，请稍后再试",
  "data": null
}
```

---

## 4. 后端开发提示
1.  **权限校验**: 必须通过 Token 解析出当前操作的 `userId`，确保用户只能修改自己的信息。
2.  **字段持久化**: 建议在 `users` 表中增加 `gender` 字段（如果尚未添加）。
3.  **响应码**: 前端会检查返回 JSON 中的 `code` 是否为 200 来决定是否更新本地缓存并关闭编辑页面。
